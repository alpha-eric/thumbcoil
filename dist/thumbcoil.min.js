/**
 * thumbcoil
 * @version 1.1.0
 * @copyright 2017 Brightcove, Inc.
 * @license Apache-2.0
 */
!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.thumbcoil=e()}}(function(){return function e(t,a,n){function r(o,s){if(!a[o]){if(!t[o]){var u="function"==typeof require&&require;if(!s&&u)return u(o,!0);if(i)return i(o,!0);var l=new Error("Cannot find module '"+o+"'");throw l.code="MODULE_NOT_FOUND",l}var c=a[o]={exports:{}};t[o][0].call(c.exports,function(e){var a=t[o][1][e];return r(a?a:e)},c,c.exports,e,t,a,n)}return a[o].exports}for(var i="function"==typeof require&&require,o=0;o<n.length;o++)r(n[o]);return r}({1:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var n=e("./lib/combinators"),r=e("./lib/data-types"),i=(0,n.start)("access_unit_delimiter",(0,n.list)([(0,n.data)("primary_pic_type",(0,r.u)(3)),(0,n.verify)("access_unit_delimiter")]));a.default=i,t.exports=a.default},{"./lib/combinators":4,"./lib/data-types":6}],2:[function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(a,"__esModule",{value:!0});var r=e("./lib/combinators"),i=e("./lib/data-types"),o=e("./lib/conditionals"),s=e("./scaling-list"),u=(n(s),null),l=(0,r.list)([(0,r.data)("cpb_cnt_minus1",(0,i.ue)(u)),(0,r.data)("bit_rate_scale",(0,i.u)(4)),(0,r.data)("cpb_size_scale",(0,i.u)(4)),(0,o.each)(function(e,t){return e<=t.cpb_cnt_minus1},(0,r.list)([(0,r.data)("bit_rate_value_minus1[]",(0,i.ue)(u)),(0,r.data)("cpb_size_value_minus1[]",(0,i.ue)(u)),(0,r.data)("cbr_flag[]",(0,i.u)(1))])),(0,r.data)("initial_cpb_removal_delay_length_minus1",(0,i.u)(5)),(0,r.data)("cpb_removal_delay_length_minus1",(0,i.u)(5)),(0,r.data)("dpb_output_delay_length_minus1",(0,i.u)(5)),(0,r.data)("time_offset_length",(0,i.u)(5))]);a.default=l,t.exports=a.default},{"./lib/combinators":4,"./lib/conditionals":5,"./lib/data-types":6,"./scaling-list":11}],3:[function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(a,"__esModule",{value:!0});var r=e("./access-unit-delimiter"),i=n(r),o=e("./seq-parameter-set"),s=n(o),u=e("./pic-parameter-set"),l=n(u),c=e("./slice-layer-without-partitioning"),_=n(c),d=e("./lib/discard-emulation-prevention"),f=n(d),p=e("./supplemental-enhancement-information"),m=n(p),g={accessUnitDelimiter:i.default,seqParameterSet:s.default,picParameterSet:l.default,sliceLayerWithoutPartitioning:_.default,discardEmulationPrevention:f.default,supplementalEnhancementInformation:m.default};a.default=g,t.exports=a.default},{"./access-unit-delimiter":1,"./lib/discard-emulation-prevention":7,"./pic-parameter-set":10,"./seq-parameter-set":12,"./slice-layer-without-partitioning":14,"./supplemental-enhancement-information":15}],4:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var n=e("./exp-golomb-string"),r=e("./rbsp-utils"),i=function(e,t){return{decode:function(e,a,i){var o=(0,r.typedArrayToBitString)(e),s=(0,r.removeRBSPTrailingBits)(o),u=new n.ExpGolombDecoder(s);return i=i||{},a=a||{},t.decode(u,i,a)},encode:function(e,a){var i=new n.ExpGolombEncoder;a=a||{},t.encode(i,e,a);var o=i.bitReservoir,s=(0,r.appendRBSPTrailingBits)(o);console.log(s);var u=(0,r.bitStringToTypedArray)(s);return u}}};a.start=i;var o=function(e,t){var a=i(e,t);return{decode:function(e,t){return a.decode(e,t,[])},encode:a.encode}};a.startArray=o;var s=function(e){return{decode:function(t,a,n,r){return e.forEach(function(e){a=e.decode(t,a,n,r)||a}),a},encode:function(t,a,n,r){e.forEach(function(e){e.encode(t,a,n,r)})}}};a.list=s;var u=function(e,t){var a=e.split(/\[(\d*)\]/),n=a[0],r=void 0,i=void 0;if(!a||""===a[0])throw new Error('ExpGolombError: Invalid name "'+e+'".');return a.length>1&&(i=!0,r=parseFloat(a[1]),isNaN(r)&&(r=void 0)),{name:e,decode:function(e,a,o,s){var u=void 0;return"number"==typeof r&&(s=r),u=t.read(e,a,o,s),i?(Array.isArray(a[n])||(a[n]=[]),void 0!==s?a[n][s]=u:a[n].push(u)):a[n]=u,a},encode:function(e,a,o,s){var u=void 0;"number"==typeof r&&(s=r),i?Array.isArray(a[n])&&(u=void 0!==s?a[n][s]:a[n].shift()):u=a[n],"number"==typeof u&&(u=t.write(e,a,o,s,u))}}};a.data=u;var l=function(e){return{decode:function(t,a,n,r){console.log(e,t.bitReservoir,a,n,r)},encode:function(t,a,n,r){console.log(e,t.bitReservoir,a,n,r)}}};a.debug=l;var c=function(e,t){var a=e.split(/\[(\d*)\]/),n=a[0],r=void 0,i=void 0;if(!a||""===a[0])throw new Error('ExpGolombError: Invalid name "'+e+'".');return a.length>1&&(i=!0,r=parseFloat(a[1]),isNaN(r)&&(r=void 0)),{name:e,decode:function(e,a,o,s){var u=void 0;return"number"==typeof r&&(s=r),u=t.decode(e,{},o,s),i?(Array.isArray(a[n])||(a[n]=[]),void 0!==s?a[n][s]=u:a[n].push(u)):a[n]=u,a},encode:function(e,a,o,s){var u=void 0;"number"==typeof r&&(s=r),i?Array.isArray(a[n])&&(u=void 0!==s?a[n][s]:a[n].shift()):u=a[n],"number"==typeof u&&t.encode(e,u,o,s)}}};a.newObj=c;var _=function(e){return{decode:function(t,a,n,r){var i=t.bitReservoir.length;0!==i&&(console.trace("ERROR: "+e+" was not completely parsed. There were ("+i+") bits remaining!"),console.log(t.originalBitReservoir))},encode:function(e,t,a,n){}}};a.verify=_;var d=function(e,t){return{decode:function(t,a,n,r){void 0!==typeof n[e]},encode:function(t,a,n,r){void 0!==typeof n[e]}}};a.pickOptions=d},{"./exp-golomb-string":8,"./rbsp-utils":9}],5:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var n=function(e,t){return{decode:function(a,n,r,i){return e(n,r,i)?t.decode(a,n,r,i):n},encode:function(a,n,r,i){e(n,r,i)&&t.encode(a,n,r,i)}}};a.when=n;var r=function(e,t){return{decode:function(a,n,r){for(var i=0;e(i,n,r);)t.decode(a,n,r,i),i++;return n},encode:function(a,n,r){for(var i=0;e(i,n,r);)t.encode(a,n,r,i),i++}}};a.each=r;var i=function(e,t){var a=e.split(/\[(\d*)\]/),n=a[0],r=void 0,i=void 0;if(!a||""===a[0])throw new Error('ExpGolombError: Invalid name "'+e+'".');return a.length>1&&(i=!0,r=parseFloat(a[1]),isNaN(r)&&(r=void 0)),function(e,a,r){return i?e[n]&&t.indexOf(e[n][r])!==-1||a[n]&&t.indexOf(a[n][r])!==-1:t.indexOf(e[n])!==-1||t.indexOf(a[n])!==-1}};a.inArray=i;var o=function(e,t){var a=e.split(/\[(\d*)\]/),n=a[0],r=void 0,i=void 0;if(!a||""===a[0])throw new Error('ExpGolombError: Invalid name "'+e+'".');return a.length>1&&(i=!0,r=parseFloat(a[1]),isNaN(r)&&(r=void 0)),function(e,a,r){return i?e[n]&&e[n][r]===t||a[n]&&a[n][r]===t:e[n]===t||a[n]===t}};a.equals=o;var s=function(e,t){var a=e.split(/\[(\d*)\]/),n=a[0],r=void 0,i=void 0;if(!a||""===a[0])throw new Error('ExpGolombError: Invalid name "'+e+'".');return a.length>1&&(i=!0,r=parseFloat(a[1]),isNaN(r)&&(r=void 0)),function(e,a,r){return i?e[n]&&e[n][r]>t||a[n]&&a[n][r]>t:e[n]>t||a[n]>t}};a.gt=s;var u=function(e){return function(t,a,n){return!e(t,a,n)}};a.not=u;var l=function(e){return function(t,a,n){return e.some(function(e){return e(t,a,n)})}};a.some=l;var c=function(e){return function(t,a,n){return e.every(function(e){return e(t,a,n)})}};a.every=c;var _=function(e){return{decode:function(t,a,n,r){return t.bitReservoir.length?e.decode(t,a,n,r):a},encode:function(t,a,n,r){e.encode(t,a,n,r)}}};a.whenMoreData=_;var d=function(e){return{decode:function(t,a,n){for(var r=0;t.bitReservoir.length;)e.decode(t,a,n,r),r++;return a},encode:function(t,a,n){var r=0,i=0;for(Array.isArray(a)&&(i=a.length);r<i;)e.encode(t,a,n,r),r++}}};a.whileMoreData=d},{}],6:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var n=function(e,t,a,n,r){return"function"==typeof e?e(t,a,n,r):e},r={u:function(e){return{read:function(t,a,r,i){var o=n(e,t,a,r,i);return t.readBits(o)},write:function(t,a,r,i,o){var s=n(e,t,a,r,i);t.writeBits(s,o)}}},f:function(e){return{read:function(t,a,r,i){var o=n(e,t,a,r,i);return t.readBits(o)},write:function(t,a,r,i,o){var s=n(e,t,a,r,i);t.writeBits(s,o)}}},ue:function(){return{read:function(e,t,a,n){return e.readUnsignedExpGolomb()},write:function(e,t,a,n,r){e.writeUnsignedExpGolomb(r)}}},se:function(){return{read:function(e,t,a,n){return e.readExpGolomb()},write:function(e,t,a,n,r){e.writeExpGolomb(r)}}},b:function(){return{read:function(e,t,a,n){return e.readUnsignedByte()},write:function(e,t,a,n,r){e.writeUnsignedByte(r)}}},val:function(e){return{read:function(t,a,n,r){return"function"==typeof e?e(t,a,n,r):e},write:function(t,a,n,r,i){"function"==typeof e&&e(ExpGolomb,output,n,r)}}}};a.default=r,t.exports=a.default},{}],7:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var n=function(e){for(var t=e.length,a=[],n=1,r=void 0,i=void 0;n<t-2;)0===e[n]&&0===e[n+1]&&3===e[n+2]?(a.push(n+2),n+=2):n++;if(0===a.length)return e;r=t-a.length,i=new Uint8Array(r);var o=0;for(n=0;n<r;o++,n++)o===a[0]&&(o++,a.shift()),i[n]=e[o];return i};a.default=n,t.exports=a.default},{}],8:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var n=function(e){this.bitReservoir=e,this.originalBitReservoir=e};a.ExpGolombDecoder=n,n.prototype.countLeadingZeros=function(){for(var e=0;e<this.bitReservoir.length;e++)if("1"===this.bitReservoir[e])return e;return-1},n.prototype.readUnsignedExpGolomb=function(){var e=this.countLeadingZeros(),t=2*e+1,a=parseInt(this.bitReservoir.slice(e,t),2);return a-=1,this.bitReservoir=this.bitReservoir.slice(t),a},n.prototype.readExpGolomb=function(){var e=this.readUnsignedExpGolomb();return 0!==e&&(e=1&e?(e+1)/2:-(e/2)),e},n.prototype.readBits=function(e){var t=parseInt(this.bitReservoir.slice(0,e),2);return this.bitReservoir=this.bitReservoir.slice(e),t},n.prototype.readRawBits=function(e){var t=this.bitReservoir.slice(0,e);return this.bitReservoir=this.bitReservoir.slice(e),t},n.prototype.readUnsignedByte=function(){return this.readBits(8)};var r=function(e){this.bitReservoir=e||""};a.ExpGolombEncoder=r,r.prototype.writeUnsignedExpGolomb=function(e){for(var t="",a=(e+1).toString(2),n=a.length-1,r=0;r<n;r++)t+="0";this.bitReservoir+=t+a},r.prototype.writeExpGolomb=function(e){e=e<=0?2*-e:2*e-1,this.writeUnsignedExpGolomb(e)},r.prototype.writeBits=function(e,t){for(var a="",n=(t&(1<<e)-1).toString(2),r=e-n.length,i=0;i<r;i++)a+="0";this.bitReservoir+=a+n},r.prototype.writeRawBits=function(e,t){for(var a="",n=e-t.length,r=0;r<n;r++)a+="0";this.bitReservoir+=a+t},r.prototype.writeUnsignedByte=function(e){this.writeBits(8,e)}},{}],9:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var n=function(e){for(var t=[],a=e.BYTES_PER_ELEMENT||1,n="",r=0;r<e.length;r++)t.push(e[r]);for(var r=0;r<a;r++)n+="00000000";return t.map(function(e){return(n+e.toString(2)).slice(8*-a)}).join("")};a.typedArrayToBitString=n;var r=function(e){for(var t=8-e.length%8,a=0;8!==t&&a<t;a++)e+="0";var n=e.match(/(.{8})/g),r=n.map(function(e){return parseInt(e,2)});return new Uint8Array(r)};a.bitStringToTypedArray=r;var i=function(e){return e.split(/10*$/)[0]};a.removeRBSPTrailingBits=i;var o=function(e){var t=e+"10000000",a=t.length%8;return 0===a?t:t.slice(0,-a)};a.appendRBSPTrailingBits=o},{}],10:[function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(a,"__esModule",{value:!0});var r=e("./lib/combinators"),i=e("./lib/conditionals"),o=e("./lib/data-types"),s=e("./scaling-list"),u=n(s),l=null,c=(0,r.start)("pic_parameter_set",(0,r.list)([(0,r.data)("pic_parameter_set_id",(0,o.ue)(l)),(0,r.data)("seq_parameter_set_id",(0,o.ue)(l)),(0,r.data)("entropy_coding_mode_flag",(0,o.u)(1)),(0,r.data)("bottom_field_pic_order_in_frame_present_flag",(0,o.u)(1)),(0,r.data)("num_slice_groups_minus1",(0,o.ue)(l)),(0,i.when)((0,i.not)((0,i.equals)("num_slice_groups_minus1",0)),(0,r.list)([(0,r.data)("slice_group_map_type",(0,o.ue)(l)),(0,i.when)((0,i.equals)("slice_group_map_type",0),(0,i.each)(function(e,t){return e<=t.num_slice_groups_minus1},(0,r.data)("run_length_minus1[]",(0,o.ue)(l)))),(0,i.when)((0,i.equals)("slice_group_map_type",2),(0,i.each)(function(e,t){return e<=t.num_slice_groups_minus1},(0,r.list)([(0,r.data)("top_left[]",(0,o.ue)(l)),(0,r.data)("bottom_right[]",(0,o.ue)(l))]))),(0,i.when)((0,i.inArray)("slice_group_map_type",[3,4,5]),(0,r.list)([(0,r.data)("slice_group_change_direction_flag",(0,o.u)(1)),(0,r.data)("slice_group_change_rate_minus1",(0,o.ue)(l))])),(0,i.when)((0,i.equals)("slice_group_map_type",6),(0,r.list)([(0,r.data)("pic_size_in_map_units_minus1",(0,o.ue)(l)),(0,i.each)(function(e,t){return e<=t.pic_size_in_map_units_minus1},(0,r.data)("slice_group_id[]",(0,o.ue)(l)))]))])),(0,r.data)("num_ref_idx_l0_default_active_minus1",(0,o.ue)(l)),(0,r.data)("num_ref_idx_l1_default_active_minus1",(0,o.ue)(l)),(0,r.data)("weighted_pred_flag",(0,o.u)(1)),(0,r.data)("weighted_bipred_idc",(0,o.u)(2)),(0,r.data)("pic_init_qp_minus26",(0,o.se)(l)),(0,r.data)("pic_init_qs_minus26",(0,o.se)(l)),(0,r.data)("chroma_qp_index_offset",(0,o.se)(l)),(0,r.data)("deblocking_filter_control_present_flag",(0,o.u)(1)),(0,r.data)("constrained_intra_pred_flag",(0,o.u)(1)),(0,r.data)("redundant_pic_cnt_present_flag",(0,o.u)(1)),(0,i.whenMoreData)((0,r.list)([(0,r.data)("transform_8x8_mode_flag",(0,o.u)(1)),(0,r.data)("pic_scaling_matrix_present_flag",(0,o.u)(1)),(0,i.when)((0,i.equals)("pic_scaling_matrix_present_flag",1),(0,i.each)(function(e,t){return e<6+(3!==t.chroma_format_Idc?2:6)*t.transform_8x8_mode_flag},(0,r.list)([(0,r.data)("pic_scaling_list_present_flag[]",(0,o.u)(1)),(0,i.when)((0,i.equals)("pic_scaling_list_present_flag[]",1),u.default)]))),(0,r.data)("second_chroma_qp_index_offset",(0,o.se)(l))])),(0,r.verify)("pic_parameter_set")]));a.default=c,t.exports=a.default},{"./lib/combinators":4,"./lib/conditionals":5,"./lib/data-types":6,"./scaling-list":11}],11:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var n={decode:function(e,t,a,n){var r=8,i=8,o=void 0,s=16,u=[];Array.isArray(t.scalingList)||(t.scalingList=[]),n>=6&&(s=64);for(var l=0;l<s;l++)0!==i&&(o=e.readExpGolomb(),i=(r+o+256)%256),u[l]=0===i?r:i,r=u[l];return t.scalingList[n]=u,t},encode:function(e,t,a,n){var r=8,i=8,o=16,s="";if(!Array.isArray(t.scalingList))return"";n>=6&&(o=64);for(var u=s.scalingList[n],l=0;l<o;l++){if(u[l]===r){s+=e.writeExpGolomb(-r);break}i=u[l]-r,s+=e.writeExpGolomb(i),r=u[l]}return s}};a.default=n,t.exports=a.default},{}],12:[function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(a,"__esModule",{value:!0});var r=e("./lib/combinators"),i=e("./lib/conditionals"),o=e("./lib/data-types"),s=e("./scaling-list"),u=n(s),l=e("./vui-parameters"),c=n(l),_=null,d=[44,83,86,100,110,118,122,128,134,138,139,244],f={read:function(e,t,a,n){return t.chroma_format_idc||a.chroma_format_idc},write:function(){}},p=(0,r.start)("seq_parameter_set",(0,r.list)([(0,r.data)("chroma_format_idc",(0,o.val)(1)),(0,r.data)("video_format",(0,o.val)(5)),(0,r.data)("color_primaries",(0,o.val)(2)),(0,r.data)("transfer_characteristics",(0,o.val)(2)),(0,r.data)("sample_ratio",(0,o.val)(1)),(0,r.data)("profile_idc",(0,o.u)(8)),(0,r.data)("constraint_set0_flag",(0,o.u)(1)),(0,r.data)("constraint_set1_flag",(0,o.u)(1)),(0,r.data)("constraint_set2_flag",(0,o.u)(1)),(0,r.data)("constraint_set3_flag",(0,o.u)(1)),(0,r.data)("constraint_set4_flag",(0,o.u)(1)),(0,r.data)("constraint_set5_flag",(0,o.u)(1)),(0,r.data)("constraint_set6_flag",(0,o.u)(1)),(0,r.data)("constraint_set7_flag",(0,o.u)(1)),(0,r.data)("level_idc",(0,o.u)(8)),(0,r.data)("seq_parameter_set_id",(0,o.ue)(_)),(0,i.when)((0,i.inArray)("profile_idc",d),(0,r.list)([(0,r.data)("chroma_format_idc",(0,o.ue)(_)),(0,i.when)((0,i.equals)("chroma_format_idc",3),(0,r.data)("separate_colour_plane_flag",(0,o.u)(1))),(0,i.when)((0,i.not)((0,i.equals)("chroma_format_idc",3)),(0,r.data)("separate_colour_plane_flag",(0,o.val)(0))),(0,r.data)("bit_depth_luma_minus8",(0,o.ue)(_)),(0,r.data)("bit_depth_chroma_minus8",(0,o.ue)(_)),(0,r.data)("qpprime_y_zero_transform_bypass_flag",(0,o.u)(1)),(0,r.data)("seq_scaling_matrix_present_flag",(0,o.u)(1)),(0,i.when)((0,i.equals)("seq_scaling_matrix_present_flag",1),(0,i.each)(function(e,t){return e<(3!==t.chroma_format_idc?8:12)},(0,r.list)([(0,r.data)("seq_scaling_list_present_flag[]",(0,o.u)(1)),(0,i.when)((0,i.equals)("seq_scaling_list_present_flag[]",1),u.default)])))])),(0,r.data)("log2_max_frame_num_minus4",(0,o.ue)(_)),(0,r.data)("pic_order_cnt_type",(0,o.ue)(_)),(0,i.when)((0,i.equals)("pic_order_cnt_type",0),(0,r.data)("log2_max_pic_order_cnt_lsb_minus4",(0,o.ue)(_))),(0,i.when)((0,i.equals)("pic_order_cnt_type",1),(0,r.list)([(0,r.data)("delta_pic_order_always_zero_flag",(0,o.u)(1)),(0,r.data)("offset_for_non_ref_pic",(0,o.se)(_)),(0,r.data)("offset_for_top_to_bottom_field",(0,o.se)(_)),(0,r.data)("num_ref_frames_in_pic_order_cnt_cycle",(0,o.ue)(_)),(0,i.each)(function(e,t){return e<t.num_ref_frames_in_pic_order_cnt_cycle},(0,r.data)("offset_for_ref_frame[]",(0,o.se)(_)))])),(0,r.data)("max_num_ref_frames",(0,o.ue)(_)),(0,r.data)("gaps_in_frame_num_value_allowed_flag",(0,o.u)(1)),(0,r.data)("pic_width_in_mbs_minus1",(0,o.ue)(_)),(0,r.data)("pic_height_in_map_units_minus1",(0,o.ue)(_)),(0,r.data)("frame_mbs_only_flag",(0,o.u)(1)),(0,i.when)((0,i.equals)("frame_mbs_only_flag",0),(0,r.data)("mb_adaptive_frame_field_flag",(0,o.u)(1))),(0,r.data)("direct_8x8_inference_flag",(0,o.u)(1)),(0,r.data)("frame_cropping_flag",(0,o.u)(1)),(0,i.when)((0,i.equals)("frame_cropping_flag",1),(0,r.list)([(0,r.data)("frame_crop_left_offset",(0,o.ue)(_)),(0,r.data)("frame_crop_right_offset",(0,o.ue)(_)),(0,r.data)("frame_crop_top_offset",(0,o.ue)(_)),(0,r.data)("frame_crop_bottom_offset",(0,o.ue)(_))])),(0,r.data)("vui_parameters_present_flag",(0,o.u)(1)),(0,i.when)((0,i.equals)("vui_parameters_present_flag",1),c.default),(0,i.when)((0,i.equals)("separate_colour_plane_flag",1),(0,r.data)("ChromaArrayType",(0,o.val)(0))),(0,i.when)((0,i.equals)("separate_colour_plane_flag",0),(0,r.data)("ChromaArrayType",f)),(0,r.verify)("seq_parameter_set")]));a.default=p,t.exports=a.default},{"./lib/combinators":4,"./lib/conditionals":5,"./lib/data-types":6,"./scaling-list":11,"./vui-parameters":16}],13:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var n=e("./lib/combinators"),r=e("./lib/conditionals"),i=e("./lib/data-types"),o=null,s={P:[0,5],B:[1,6],I:[2,7],SP:[3,8],SI:[4,9]},u=function(e,t,a,n){return a.log2_max_frame_num_minus4+4},l=function(e,t,a,n){return a.log2_max_pic_order_cnt_lsb_minus4+4},c=function(e,t,a,n){var r=a.pic_height_in_map_units_minus1+1,i=a.pic_width_in_mbs_minus1+1,o=a.slice_group_change_rate_minus1+1,s=i*r;return Math.ceil(Math.log(s/o+1)/Math.LN2)},_=(0,r.some)([(0,r.every)([(0,r.equals)("weighted_pred_flag",1),(0,r.some)([(0,r.inArray)("slice_type",s.P),(0,r.inArray)("slice_type",s.SP)])]),(0,r.every)([(0,r.equals)("weighted_bipred_idc",1),(0,r.inArray)("slice_type",s.B)])]),d=(0,n.list)([(0,r.when)((0,r.every)([(0,r.not)((0,r.inArray)("slice_type",s.I)),(0,r.not)((0,r.inArray)("slice_type",s.SI))]),(0,n.list)([(0,n.data)("ref_pic_list_modification_flag_l0",(0,i.u)(1)),(0,r.when)((0,r.equals)("ref_pic_list_modification_flag_l0",1),(0,r.each)(function(e,t){return 0===e||3!==t.modification_of_pic_nums_idc_l0[e-1]},(0,n.list)([(0,n.data)("modification_of_pic_nums_idc_l0[]",(0,i.ue)(o)),(0,r.when)((0,r.inArray)("modification_of_pic_nums_idc_l0[]",[0,1]),(0,n.data)("abs_diff_pic_num_minus1_l0[]",(0,i.ue)(o))),(0,r.when)((0,r.equals)("modification_of_pic_nums_idc_l0[]",2),(0,n.data)("long_term_pic_num_l0[]",(0,i.ue)(o)))])))])),(0,r.when)((0,r.inArray)("slice_type",s.B),(0,n.list)([(0,n.data)("ref_pic_list_modification_flag_l1",(0,i.u)(1)),(0,r.when)((0,r.equals)("ref_pic_list_modification_flag_l1",1),(0,r.each)(function(e,t){return 0===e||3!==t.modification_of_pic_nums_idc_l1[e-1]},(0,n.list)([(0,n.data)("modification_of_pic_nums_idc_l1[]",(0,i.ue)(o)),(0,r.when)((0,r.inArray)("modification_of_pic_nums_idc_l1[]",[0,1]),(0,n.data)("abs_diff_pic_num_minus1_l1[]",(0,i.ue)(o))),(0,r.when)((0,r.equals)("modification_of_pic_nums_idc_l1[]",2),(0,n.data)("long_term_pic_num_l1[]",(0,i.ue)(o)))])))]))]),f={encode:function(){throw new Error("ref_pic_list_mvc_modification: NOT IMPLEMENTED!")},decode:function(){throw new Error("ref_pic_list_mvc_modification: NOT IMPLEMENTED!")}},p=(0,n.list)([(0,n.data)("luma_log2_weight_denom",(0,i.ue)(o)),(0,r.when)((0,r.not)((0,r.equals)("ChromaArrayType",0)),(0,n.data)("chroma_log2_weight_denom",(0,i.ue)(o))),(0,r.each)(function(e,t){return e<=t.num_ref_idx_l0_active_minus1},(0,n.list)([(0,n.data)("luma_weight_l0_flag",(0,i.u)(1)),(0,r.when)((0,r.equals)("luma_weight_l0_flag",1),(0,n.list)([(0,n.data)("luma_weight_l0[]",(0,i.se)(o)),(0,n.data)("luma_offset_l0[]",(0,i.se)(o)),(0,r.when)((0,r.not)((0,r.equals)("ChromaArrayType",0)),(0,n.list)([(0,n.data)("chroma_weight_l0_flag",(0,i.u)(1)),(0,r.when)((0,r.equals)("chroma_weight_l0_flag",1),(0,n.list)([(0,n.data)("chroma_weight_l0_Cr[]",(0,i.se)(o)),(0,n.data)("chroma_offset_l0_Cr[]",(0,i.se)(o)),(0,n.data)("chroma_weight_l0_Cb[]",(0,i.se)(o)),(0,n.data)("chroma_offset_l0_Cb[]",(0,i.se)(o))]))]))]))])),(0,r.when)((0,r.inArray)("slice_type",s.B),(0,r.each)(function(e,t){return e<=t.num_ref_idx_l1_active_minus1},(0,n.list)([(0,n.data)("luma_weight_l1_flag",(0,i.u)(1)),(0,r.when)((0,r.equals)("luma_weight_l1_flag",1),(0,n.list)([(0,n.data)("luma_weight_l1[]",(0,i.se)(o)),(0,n.data)("luma_offset_l1[]",(0,i.se)(o)),(0,r.when)((0,r.not)((0,r.equals)("ChromaArrayType",0)),(0,n.list)([(0,n.data)("chroma_weight_l1_flag",(0,i.u)(1)),(0,r.when)((0,r.equals)("chroma_weight_l1_flag",1),(0,n.list)([(0,n.data)("chroma_weight_l1_Cr[]",(0,i.se)(o)),(0,n.data)("chroma_offset_l1_Cr[]",(0,i.se)(o)),(0,n.data)("chroma_weight_l1_Cb[]",(0,i.se)(o)),(0,n.data)("chroma_offset_l1_Cb[]",(0,i.se)(o))]))]))]))])))]),m=(0,n.list)([(0,r.when)((0,r.equals)("nal_unit_type",5),(0,n.list)([(0,n.data)("no_output_of_prior_pics_flag",(0,i.u)(1)),(0,n.data)("long_term_reference_flag",(0,i.u)(1))])),(0,r.when)((0,r.not)((0,r.equals)("nal_unit_type",5)),(0,n.list)([(0,n.data)("adaptive_ref_pic_marking_mode_flag",(0,i.u)(1)),(0,r.when)((0,r.equals)("adaptive_ref_pic_marking_mode_flag",1),(0,r.each)(function(e,t){return 0===e||0!==t.memory_management_control_operation[e-1]},(0,n.list)([(0,n.data)("memory_management_control_operation[]",(0,i.ue)(o)),(0,r.when)((0,r.inArray)("memory_management_control_operation[]",[1,3]),(0,n.data)("difference_of_pic_nums_minus1[]",(0,i.ue)(o))),(0,r.when)((0,r.inArray)("memory_management_control_operation[]",[2]),(0,n.data)("long_term_pic_num[]",(0,i.ue)(o))),(0,r.when)((0,r.inArray)("memory_management_control_operation[]",[3,6]),(0,n.data)("long_term_frame_idx[]",(0,i.ue)(o))),(0,r.when)((0,r.inArray)("memory_management_control_operation[]",[4]),(0,n.data)("max_long_term_frame_idx_plus1[]",(0,i.ue)(o)))])))]))]),g=(0,n.list)([(0,n.data)("first_mb_in_slice",(0,i.ue)(o)),(0,n.data)("slice_type",(0,i.ue)(o)),(0,n.data)("pic_parameter_set_id",(0,i.ue)(o)),(0,r.when)((0,r.equals)("separate_colour_plane_flag",1),(0,n.data)("colour_plane_id",(0,i.u)(2))),(0,n.data)("frame_num",(0,i.u)(u)),(0,r.when)((0,r.equals)("frame_mbs_only_flag",0),(0,n.list)([(0,n.data)("field_pic_flag",(0,i.u)(1)),(0,r.when)((0,r.equals)("field_pic_flag",1),(0,n.data)("bottom_field_flag",(0,i.u)(1)))])),(0,r.when)((0,r.equals)("idrPicFlag",1),(0,n.data)("idr_pic_id",(0,i.ue)(o))),(0,r.when)((0,r.equals)("pic_order_cnt_type",0),(0,n.list)([(0,n.data)("pic_order_cnt_lsb",(0,i.u)(l)),(0,r.when)((0,r.every)([(0,r.equals)("bottom_field_pic_order_in_frame_present_flag",1),(0,r.not)((0,r.equals)("field_pic_flag",1))]),(0,n.data)("delta_pic_order_cnt_bottom",(0,i.se)(o)))])),(0,r.when)((0,r.every)([(0,r.equals)("pic_order_cnt_type",1),(0,r.not)((0,r.equals)("delta_pic_order_always_zero_flag",1))]),(0,n.list)([(0,n.data)("delta_pic_order_cnt[0]",(0,i.se)(o)),(0,r.when)((0,r.every)([(0,r.equals)("bottom_field_pic_order_in_frame_present_flag",1),(0,r.not)((0,r.equals)("field_pic_flag",1))]),(0,n.data)("delta_pic_order_cnt[1]",(0,i.se)(o)))])),(0,r.when)((0,r.equals)("redundant_pic_cnt_present_flag",1),(0,n.data)("redundant_pic_cnt",(0,i.ue)(o))),(0,r.when)((0,r.inArray)("slice_type",s.B),(0,n.data)("direct_spatial_mv_pred_flag",(0,i.u)(1))),(0,r.when)((0,r.some)([(0,r.inArray)("slice_type",s.P),(0,r.inArray)("slice_type",s.SP),(0,r.inArray)("slice_type",s.B)]),(0,n.list)([(0,n.data)("num_ref_idx_active_override_flag",(0,i.u)(1)),(0,r.when)((0,r.equals)("num_ref_idx_active_override_flag",1),(0,n.list)([(0,n.data)("num_ref_idx_l0_active_minus1",(0,i.ue)(o)),(0,r.when)((0,r.inArray)("slice_type",s.B),(0,n.data)("num_ref_idx_l1_active_minus1",(0,i.ue)(o)))]))])),(0,r.when)((0,r.some)([(0,r.equals)("nal_unit_type",20),(0,r.equals)("nal_unit_type",21)]),f),(0,r.when)((0,r.every)([(0,r.not)((0,r.equals)("nal_unit_type",20)),(0,r.not)((0,r.equals)("nal_unit_type",21))]),d),(0,r.when)(_,p),(0,r.when)((0,r.not)((0,r.equals)("nal_ref_idc",0)),m),(0,r.when)((0,r.every)([(0,r.equals)("entropy_coding_mode_flag",1),(0,r.not)((0,r.inArray)("slice_type",s.I)),(0,r.not)((0,r.inArray)("slice_type",s.SI))]),(0,n.data)("cabac_init_idc",(0,i.ue)(o))),(0,n.data)("slice_qp_delta",(0,i.se)(o)),(0,r.when)((0,r.inArray)("slice_type",s.SP),(0,n.data)("sp_for_switch_flag",(0,i.u)(1))),(0,r.when)((0,r.some)([(0,r.inArray)("slice_type",s.SP),(0,r.inArray)("slice_type",s.SI)]),(0,n.data)("slice_qs_delta",(0,i.se)(o))),(0,r.when)((0,r.equals)("deblocking_filter_control_present_flag",1),(0,n.list)([(0,n.data)("disable_deblocking_filter_idc",(0,i.ue)(o)),(0,r.when)((0,r.not)((0,r.equals)("disable_deblocking_filter_idc",1)),(0,n.list)([(0,n.data)("slice_alpha_c0_offset_div2",(0,i.se)(o)),(0,n.data)("slice_beta_offset_div2",(0,i.se)(o))]))])),(0,r.when)((0,r.every)([(0,r.not)((0,r.equals)("num_slice_groups_minus1",0)),(0,r.some)([(0,r.equals)("slice_group_map_type",3),(0,r.equals)("slice_group_map_type",4),(0,r.equals)("slice_group_map_type",5)])]),(0,n.data)("slice_group_change_cycle",(0,i.u)(c)))]);a.default=g,t.exports=a.default},{"./lib/combinators":4,"./lib/conditionals":5,"./lib/data-types":6}],14:[function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(a,"__esModule",{value:!0});var r=e("./slice-header"),i=n(r),o=e("./lib/combinators"),s=(0,o.start)("slice_layer_without_partitioning",(0,o.list)([i.default]));a.default=s,t.exports=a.default},{"./lib/combinators":4,"./slice-header":13}],15:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var n=e("./lib/exp-golomb-string"),r=e("./lib/combinators"),i=e("./lib/conditionals"),o=e("./lib/data-types"),s=e("./lib/rbsp-utils"),u=null,l=((0,r.list)([]),function(e,t,a,n){return a.initial_cpb_removal_delay_length_minus1+1}),c=function(e,t,a,n){return a.cpb_removal_delay_length_minus1+1},_=function(e,t,a,n){return a.dpb_output_delay_length_minus1+1},d=function(e,t,a,n){return a.time_offset_length},f={0:{name:"buffering_period",codec:(0,r.list)([(0,r.data)("seq_parameter_set_id",(0,o.ue)(u)),(0,i.when)((0,i.equals)("nal_hrd_parameters_present_flag",1),(0,i.each)(function(e,t,a){return e<=a.cpb_cnt_minus1},(0,r.list)([(0,r.data)("initial_cpb_removal_delay[]",(0,o.u)(l)),(0,r.data)("initial_cpb_removal_delay_offset[]",(0,o.u)(l))]))),(0,i.when)((0,i.equals)("vcl_hrd_parameters_present_flag",1),(0,i.each)(function(e,t,a){return e<=a.cpb_cnt_minus1},(0,r.list)([(0,r.data)("initial_cpb_removal_delay[]",(0,o.u)(l)),(0,r.data)("initial_cpb_removal_delay_offset[]",(0,o.u)(l))])))])},1:{name:"pic_timing",codec:(0,r.list)([(0,i.when)((0,i.some)([(0,i.equals)("nal_hrd_parameters_present_flag",1),(0,i.equals)("vcl_hrd_parameters_present_flag",1)]),(0,r.list)([(0,r.data)("cpb_removal_delay",(0,o.u)(c)),(0,r.data)("dpb_output_delay",(0,o.u)(_))])),(0,i.when)((0,i.equals)("pic_struct_present_flag",1),(0,r.list)([(0,r.data)("pic_struct",(0,o.u)(4)),(0,i.when)((0,i.equals)("pic_struct",0),(0,r.data)("NumClockTS",(0,o.val)(1))),(0,i.when)((0,i.equals)("pic_struct",1),(0,r.data)("NumClockTS",(0,o.val)(1))),(0,i.when)((0,i.equals)("pic_struct",2),(0,r.data)("NumClockTS",(0,o.val)(1))),(0,i.when)((0,i.equals)("pic_struct",3),(0,r.data)("NumClockTS",(0,o.val)(2))),(0,i.when)((0,i.equals)("pic_struct",4),(0,r.data)("NumClockTS",(0,o.val)(2))),(0,i.when)((0,i.equals)("pic_struct",5),(0,r.data)("NumClockTS",(0,o.val)(3))),(0,i.when)((0,i.equals)("pic_struct",6),(0,r.data)("NumClockTS",(0,o.val)(3))),(0,i.when)((0,i.equals)("pic_struct",7),(0,r.data)("NumClockTS",(0,o.val)(2))),(0,i.when)((0,i.equals)("pic_struct",8),(0,r.data)("NumClockTS",(0,o.val)(2))),(0,i.each)(function(e,t){return e<t.NumClockTS},(0,r.list)([(0,r.data)("clock_timestamp_flag[]",(0,o.u)(1)),(0,i.when)((0,i.equals)("clock_timestamp_flag[]",1),(0,r.list)([(0,r.data)("ct_type[]",(0,o.u)(2)),(0,r.data)("nuit_field_based_flag[]",(0,o.u)(1)),(0,r.data)("counting_type[]",(0,o.u)(5)),(0,r.data)("full_timestamp_flag[]",(0,o.u)(1)),(0,r.data)("discontinuity_flag[]",(0,o.u)(1)),(0,r.data)("cnt_dropped_flag[]",(0,o.u)(1)),(0,r.data)("n_frames[]",(0,o.u)(8)),(0,i.when)((0,i.equals)("full_timestamp_flag[]",1),(0,r.list)([(0,r.data)("seconds_value[]",(0,o.u)(6)),(0,r.data)("minutes_value[]",(0,o.u)(6)),(0,r.data)("hours_value[]",(0,o.u)(5))])),(0,i.when)((0,i.equals)("full_timestamp_flag[]",0),(0,r.list)([(0,r.data)("seconds_flag[]",(0,o.u)(1)),(0,i.when)((0,i.equals)("seconds_flag[]",1),(0,r.list)([(0,r.data)("seconds_value[]",(0,o.u)(6)),(0,r.data)("minutes_flag[]",(0,o.u)(1)),(0,i.when)((0,i.equals)("minutes_flag[]",1),(0,r.list)([(0,r.data)("minutes_value[]",(0,o.u)(6)),(0,r.data)("hours_flag[]",(0,o.u)(1)),(0,i.when)((0,i.equals)("hours_flag[]",1),(0,r.data)("hours_value[]",(0,o.u)(5)))]))]))])),(0,i.when)((0,i.gt)("time_offset_length",0),(0,r.data)("time_offset",(0,o.u)(d)))]))]))]))])},2:{name:"pan_scan_rect"},3:{name:"filler_payload"},4:{name:"user_data_registered_itu_t_t35",codec:(0,r.list)([(0,r.data)("itu_t_t35_country_code",(0,o.u)(8)),(0,r.data)("itu_t_t35_provider_code",(0,o.u)(16)),(0,i.when)((0,i.equals)("itu_t_t35_provider_code",49),(0,r.data)("ATSC_user_identifier",(0,o.u)(32))),(0,i.when)((0,i.inArray)("itu_t_t35_provider_code",[47,49]),(0,r.data)("ATSC1_data_user_data_type_code",(0,o.u)(8))),(0,i.when)((0,i.equals)("itu_t_t35_provider_code",47),(0,r.data)("DIRECTV_user_data_length",(0,o.u)(8))),(0,r.data)("process_em_data_flag",(0,o.u)(1)),(0,r.data)("process_cc_data_flag",(0,o.u)(1)),(0,r.data)("additional_data_flag",(0,o.u)(1)),(0,r.data)("cc_count",(0,o.u)(5)),(0,r.data)("em_data",(0,o.u)(8)),(0,i.each)(function(e,t){return e<t.cc_count},(0,r.newObj)("cc_data_pkt[]",(0,r.list)([(0,r.data)("type",(0,o.val)("cc_data_pkt")),(0,r.data)("marker_bits",(0,o.u)(5)),(0,r.data)("cc_valid",(0,o.u)(1)),(0,r.data)("cc_type",(0,o.u)(2)),(0,r.data)("cc_data_1",(0,o.u)(8)),(0,r.data)("cc_data_2",(0,o.u)(8))])))])},5:{name:"user_data_unregistered"},6:{name:"recovery_point",codec:(0,r.list)([(0,r.data)("recovery_frame_cnt",(0,o.ue)(u)),(0,r.data)("exact_match_flag",(0,o.u)(1)),(0,r.data)("broken_link_flag",(0,o.u)(1)),(0,r.data)("changing_slice_group_idc",(0,o.u)(2))])},7:{name:"dec_ref_pic_marking_repetition"},8:{name:"spare_pic"},9:{name:"scene_info"},10:{name:"sub_seq_info"},11:{name:"sub_seq_layer_characteristics"},12:{name:"sub_seq_characteristics"},13:{name:"full_frame_freeze"},14:{name:"full_frame_freeze_release"},15:{name:"full_frame_snapshot"},16:{name:"progressive_refinement_segment_start"},17:{name:"progressive_refinement_segment_end"},18:{name:"motion_constrained_slice_group_set"},19:{name:"film_grain_characteristics"},20:{name:"deblocking_filter_display_preference"},21:{name:"stereo_video_info"},22:{name:"post_filter_hint"},23:{name:"tone_mapping_info"},24:{name:"scalability_info"},25:{name:"sub_pic_scalable_layer"},26:{name:"non_required_layer_rep"},27:{name:"priority_layer_info"},28:{name:"layers_not_present"},29:{name:"layer_dependency_change"},30:{name:"scalable_nesting"},31:{name:"base_layer_temporal_hrd"
},32:{name:"quality_layer_integrity_check"},33:{name:"redundant_pic_property"},34:{name:"tl"},35:{name:"tl_switching_point"},36:{name:"parallel_decoding_info"},37:{name:"mvc_scalable_nesting"},38:{name:"view_scalability_info"},39:{name:"multiview_scene_info"},40:{name:"multiview_acquisition_info"},41:{name:"non_required_view_component"},42:{name:"view_dependency_change"},43:{name:"operation_points_not_present"},44:{name:"base_view_temporal_hrd"},45:{name:"frame_packing_arrangement"}},p={decode:function(e,t,a,r){var i={payloadType:0,payloadSize:0},o=void 0;do o=e.readUnsignedByte(),i.payloadType+=o;while(255===o);do o=e.readUnsignedByte(),i.payloadSize+=o;while(255===o);var u=f[i.payloadType],l=e.readRawBits(8*i.payloadSize);if(u)if(i.type=u.name,u.codec){var c=new n.ExpGolombDecoder(l);u.codec.decode(c,i,a)}else i.data=(0,s.bitStringToTypedArray)(l);else i.type="unknown type",i.data=(0,s.bitStringToTypedArray)(l);return t[r]=i,t},encode:function(e,t,a,r){for(var i=t[r],o=i.payloadType;o>255;)o-=255,e.writeUnsignedByte(255);e.writeUnsignedByte(o);for(var u=i.payloadSize;u>255;)u-=255,e.writeUnsignedByte(255);e.writeUnsignedByte(u);var l=f[i.payloadType];if(l&&l.codec){var c=new n.ExpGolombEncoder;l.codec.encode(c,i,a);var _=c.bitReservoir;_.length%8!==0&&(_=(0,s.appendRBSPTrailingBits)(_)),e.writeRawBits(8*i.payloadSize,_)}else i.data?e.writeRawBits(8*i.payloadSize,(0,s.typedArrayToBitString)(i.data)):e.writeRawBits(8*i.payloadSize,"")}},m=(0,r.startArray)("sei_message",(0,i.whileMoreData)(p));a.default=m,t.exports=a.default},{"./lib/combinators":4,"./lib/conditionals":5,"./lib/data-types":6,"./lib/exp-golomb-string":8,"./lib/rbsp-utils":9}],16:[function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(a,"__esModule",{value:!0});var r=e("./lib/combinators"),i=e("./lib/conditionals"),o=e("./lib/data-types"),s=e("./hdr-parameters"),u=n(s),l=null,c=(0,r.list)([(0,i.when)((0,i.equals)("aspect_ratio_idc",1),(0,r.data)("sample_ratio",(0,o.val)(1))),(0,i.when)((0,i.equals)("aspect_ratio_idc",2),(0,r.data)("sample_ratio",(0,o.val)(12/11))),(0,i.when)((0,i.equals)("aspect_ratio_idc",3),(0,r.data)("sample_ratio",(0,o.val)(10/11))),(0,i.when)((0,i.equals)("aspect_ratio_idc",4),(0,r.data)("sample_ratio",(0,o.val)(16/11))),(0,i.when)((0,i.equals)("aspect_ratio_idc",5),(0,r.data)("sample_ratio",(0,o.val)(40/33))),(0,i.when)((0,i.equals)("aspect_ratio_idc",6),(0,r.data)("sample_ratio",(0,o.val)(24/11))),(0,i.when)((0,i.equals)("aspect_ratio_idc",7),(0,r.data)("sample_ratio",(0,o.val)(20/11))),(0,i.when)((0,i.equals)("aspect_ratio_idc",8),(0,r.data)("sample_ratio",(0,o.val)(32/11))),(0,i.when)((0,i.equals)("aspect_ratio_idc",9),(0,r.data)("sample_ratio",(0,o.val)(80/33))),(0,i.when)((0,i.equals)("aspect_ratio_idc",10),(0,r.data)("sample_ratio",(0,o.val)(18/11))),(0,i.when)((0,i.equals)("aspect_ratio_idc",11),(0,r.data)("sample_ratio",(0,o.val)(15/11))),(0,i.when)((0,i.equals)("aspect_ratio_idc",12),(0,r.data)("sample_ratio",(0,o.val)(64/33))),(0,i.when)((0,i.equals)("aspect_ratio_idc",13),(0,r.data)("sample_ratio",(0,o.val)(160/99))),(0,i.when)((0,i.equals)("aspect_ratio_idc",14),(0,r.data)("sample_ratio",(0,o.val)(4/3))),(0,i.when)((0,i.equals)("aspect_ratio_idc",15),(0,r.data)("sample_ratio",(0,o.val)(1.5))),(0,i.when)((0,i.equals)("aspect_ratio_idc",16),(0,r.data)("sample_ratio",(0,o.val)(2))),(0,i.when)((0,i.equals)("aspect_ratio_idc",255),(0,r.list)([(0,r.data)("sar_width",(0,o.u)(16)),(0,r.data)("sar_height",(0,o.u)(16)),(0,r.data)("sample_ratio",(0,o.val)(function(e,t,a){return t.sar_width/t.sar_height}))]))]),_=(0,r.list)([(0,r.data)("aspect_ratio_info_present_flag",(0,o.u)(1)),(0,i.when)((0,i.equals)("aspect_ratio_info_present_flag",1),(0,r.list)([(0,r.data)("aspect_ratio_idc",(0,o.u)(8)),c])),(0,r.data)("overscan_info_present_flag",(0,o.u)(1)),(0,i.when)((0,i.equals)("overscan_info_present_flag",1),(0,r.data)("overscan_appropriate_flag",(0,o.u)(1))),(0,r.data)("video_signal_type_present_flag",(0,o.u)(1)),(0,i.when)((0,i.equals)("video_signal_type_present_flag",1),(0,r.list)([(0,r.data)("video_format",(0,o.u)(3)),(0,r.data)("video_full_range_flag",(0,o.u)(1)),(0,r.data)("colour_description_present_flag",(0,o.u)(1)),(0,i.when)((0,i.equals)("colour_description_present_flag",1),(0,r.list)([(0,r.data)("colour_primaries",(0,o.u)(8)),(0,r.data)("transfer_characteristics",(0,o.u)(8)),(0,r.data)("matrix_coefficients",(0,o.u)(8))]))])),(0,r.data)("chroma_loc_info_present_flag",(0,o.u)(1)),(0,i.when)((0,i.equals)("chroma_loc_info_present_flag",1),(0,r.list)([(0,r.data)("chroma_sample_loc_type_top_field",(0,o.ue)(l)),(0,r.data)("chroma_sample_loc_type_bottom_field",(0,o.ue)(l))])),(0,r.data)("timing_info_present_flag",(0,o.u)(1)),(0,i.when)((0,i.equals)("timing_info_present_flag",1),(0,r.list)([(0,r.data)("num_units_in_tick",(0,o.u)(32)),(0,r.data)("time_scale",(0,o.u)(32)),(0,r.data)("fixed_frame_rate_flag",(0,o.u)(1))])),(0,r.data)("nal_hrd_parameters_present_flag",(0,o.u)(1)),(0,i.when)((0,i.equals)("nal_hrd_parameters_present_flag",1),u.default),(0,r.data)("vcl_hrd_parameters_present_flag",(0,o.u)(1)),(0,i.when)((0,i.equals)("vcl_hrd_parameters_present_flag",1),u.default),(0,i.when)((0,i.some)([(0,i.equals)("nal_hrd_parameters_present_flag",1),(0,i.equals)("vcl_hrd_parameters_present_flag",1)]),(0,r.data)("low_delay_hrd_flag",(0,o.u)(1))),(0,r.data)("pic_struct_present_flag",(0,o.u)(1)),(0,r.data)("bitstream_restriction_flag",(0,o.u)(1)),(0,i.when)((0,i.equals)("bitstream_restriction_flag",1),(0,r.list)([(0,r.data)("motion_vectors_over_pic_boundaries_flag",(0,o.u)(1)),(0,r.data)("max_bytes_per_pic_denom",(0,o.ue)(l)),(0,r.data)("max_bits_per_mb_denom",(0,o.ue)(l)),(0,r.data)("log2_max_mv_length_horizontal",(0,o.ue)(l)),(0,r.data)("log2_max_mv_length_vertical",(0,o.ue)(l)),(0,r.data)("max_num_reorder_frames",(0,o.ue)(l)),(0,r.data)("max_dec_frame_buffering",(0,o.ue)(l))]))]);a.default=_,t.exports=a.default},{"./hdr-parameters":2,"./lib/combinators":4,"./lib/conditionals":5,"./lib/data-types":6}],17:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var n=function(e,t){var a=Array.prototype.slice.call(new Uint8Array(e.buffer,e.byteOffset,e.byteLength)),n=a.reduce(r(16),[]).map(function(e){return e.map(function(e){return e<=31||e>=127&&e<=159?".":String.fromCharCode(e)}).map(function(e){return"&"===e?"&amp;":"<"===e?"&lt;":e})}).map(function(e){return e.join("")}),i=a.map(function(e){return("00"+e.toString(16)).slice(-2)}).reduce(r(8),[]).reduce(r(2),[]).map(function(e){return e.map(function(e){return e.join(" ")}).join("  ")});return i?1===i.length?i.join("").slice(1):i.map(function(e,a){for(var r=t+e;r.length<54;)r+=" ";return r+n[a]}).join("\n"):"<>"},r=function(e){return function(t,a){var n=t.pop();return n?n.length===e&&(t.push(n),n=[]):n=[],n.push(a),t.push(n),t}};a.default=n,t.exports=a.default},{}],18:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var n=e("../../bit-streams/h264"),r=void 0,i=void 0,o=void 0,s=function(e,t){var a={};return e&&Object.keys(e).forEach(function(t){a[t]=e[t]}),t&&Object.keys(t).forEach(function(e){a[e]=t[e]}),a};a.mergePS=s;var u=function(e){var t,a,n=new DataView(e.buffer,e.byteOffset,e.byteLength),r=[];for(t=0;t+4<e.length;t+=a)if(a=n.getUint32(t),t+=4,a<=0)r.push({type:"MALFORMED-DATA"});else{if(a>e.length)return void r.push({type:"UNKNOWN MDAT DATA"});var i=e.subarray(t,t+a);r.push(c(i))}return r};a.nalParseAVCC=u;var l=function(e){for(var t=0,a=void 0,n=[];t<e.byteLength-3;t++)if(0===e[t]&&0===e[t+1]&&1===e[t+2]){a=t+5;break}for(;a<e.byteLength;)switch(e[a]){case 0:if(0!==e[a-1]){a+=2;break}if(0!==e[a-2]){a++;break}t+3!==a-2&&n.push(c(e.subarray(t+3,a-2)));do a++;while(1!==e[a]&&a<e.length);t=a-2,a+=3;break;case 1:if(0!==e[a-1]||0!==e[a-2]){a+=3;break}n.push(c(e.subarray(t+3,a-2))),t=a-2,a+=3;break;default:a+=3}return e=e.subarray(t),a-=t,t=0,e&&e.byteLength>3&&n.push(c(e.subarray(t+3))),n};a.nalParseAnnexB=l;var c=function(e){var t=void 0;t=e.length>1?(0,n.discardEmulationPrevention)(e.subarray(1)):e;var a=31&e[0],u=(96&e[0])>>>5;o&&(o.nal_unit_type=a,o.nal_ref_idc=u);var l=void 0,c=void 0;switch(a){case 1:return l=n.sliceLayerWithoutPartitioning.decode(t,o),l.type="slice_layer_without_partitioning_rbsp",l.nal_ref_idc=u,l.size=t.length,l;case 2:return{type:"slice_data_partition_a_layer_rbsp",size:t.length};case 3:return{type:"slice_data_partition_b_layer_rbsp",size:t.length};case 4:return{type:"slice_data_partition_c_layer_rbsp",size:t.length};case 5:return c=s(o,{idrPicFlag:1}),l=n.sliceLayerWithoutPartitioning.decode(t,c),l.type="slice_layer_without_partitioning_rbsp_idr",l.nal_ref_idc=u,l.size=t.length,l;case 6:return l=n.supplementalEnhancementInformation.decode(t,o),l.type="sei_message_rbsp",l.size=t.length,l;case 7:return r=n.seqParameterSet.decode(t),o=s(i,r),r.type="seq_parameter_set_rbsp",r.size=t.length,r;case 8:return i=n.picParameterSet.decode(t),o=s(i,r),i.type="pic_parameter_set_rbsp",i.size=t.length,i;case 9:return l=n.accessUnitDelimiter.decode(t),l.type="access_unit_delimiter_rbsp",l.size=t.length,l;case 10:return{type:"end_of_seq_rbsp",size:t.length};case 11:return{type:"end_of_stream_rbsp",size:t.length};case 12:return{type:"filler_data_rbsp",size:t.length};case 13:return{type:"seq_parameter_set_extension_rbsp",size:t.length};case 14:return{type:"prefix_nal_unit_rbsp",size:t.length};case 15:return{type:"subset_seq_parameter_set_rbsp",size:t.length};case 16:return{type:"depth_parameter_set_rbsp",size:t.length};case 19:return{type:"slice_layer_without_partitioning_rbsp_aux",size:t.length};case 20:case 21:return{type:"slice_layer_extension_rbsp",size:t.length};default:return{type:"INVALID NAL-UNIT-TYPE - "+a,size:t.length}}}},{"../../bit-streams/h264":3}],19:[function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(a,"__esModule",{value:!0});var r=e("./common/nal-parse"),i=e("./common/data-to-hex.js"),o=n(i),s={8:"audio",9:"video",18:"metadata"},u=function(e,t){var a=["AVC Sequence Header","AVC NALU","AVC End-of-Sequence"],n=e[1]&parseInt("01111111",2)<<16|e[2]<<8|e[3];return t=t||{},t.avcPacketType=a[e[0]],t.CompositionTime=e[1]&parseInt("10000000",2)?-n:n,t.data=e.subarray(4),0===e[0]&&(t.type="video-metadata"),t},l=function(e,t){var a=["Unknown","Keyframe (for AVC, a seekable frame)","Inter frame (for AVC, a nonseekable frame)","Disposable inter frame (H.263 only)","Generated keyframe (reserved for server use only)","Video info/command frame"],n=e[0]&parseInt("00001111",2);return t=t||{},t.frameType=a[(e[0]&parseInt("11110000",2))>>>4],t.codecID=n,7===n?u(e.subarray(1),t):t},c=function(e,t){var a=["AAC Sequence Header","AAC Raw"];return t=t||{},t.aacPacketType=a[e[0]],t.data=e.subarray(1),t},_=function(e,t){var a=["Linear PCM, platform endian","ADPCM","MP3","Linear PCM, little endian","Nellymoser 16-kHz mono","Nellymoser 8-kHz mono","Nellymoser","G.711 A-law logarithmic PCM","G.711 mu-law logarithmic PCM","reserved","AAC","Speex","MP3 8-Khz","Device-specific sound"],n=["5.5-kHz","11-kHz","22-kHz","44-kHz"],r=(e[0]&parseInt("11110000",2))>>>4;return t=t||{},t.soundFormat=a[r],t.soundRate=n[(e[0]&parseInt("00001100",2))>>>2],t.soundSize=(e[0]&parseInt("00000010",2))>>>1?"16-bit":"8-bit",t.soundType=e[0]&parseInt("00000001",2)?"Stereo":"Mono",10===r?c(e.subarray(1),t):t},d=function(e){return{type:s[e[0]],dataSize:e[1]<<16|e[2]<<8|e[3],timestamp:e[7]<<24|e[4]<<16|e[5]<<8|e[6],streamID:e[8]<<16|e[9]<<8|e[10]}},f=function(e){var t=d(e);switch(e[0]){case 8:_(e.subarray(11),t);break;case 9:l(e.subarray(11),t);break;case 18:}return t},p=function(e){var t,a,n=9,r=[];for(n+=4;n<e.byteLength;)t=e[n+1]<<16,t|=e[n+2]<<8,t|=e[n+3],t+=11,a=e.subarray(n,n+t),r.push(f(a)),n+=t+4;return r},m=function(e){var t=document.createElement("div");return g(e,t,1),t},g=function(e,t,a){e.forEach(function(e){document.createElement("div");h(y(e),t,a+1)})},y=function(e){return"video"===e.type&&(e.nals=(0,r.nalParseAVCC)(e.data),e.nals.size=e.data.length),e},h=function e(t,a,n){var r=function(e){return"[object Object]"===Object.prototype.toString.call(e)},i=["size","flags","type","version"],o=["boxes","nals","samples","packetCount"],s=Object.keys(t).filter(function(e){return r(t[e])||Array.isArray(t[e])&&r(t[e][0])}),u=i.concat(o).concat(s),l=Object.keys(t).filter(function(e){return u.indexOf(e)===-1}),c=document.createElement("mp4-box"),_=document.createElement("mp4-properties"),d=document.createElement("mp4-boxes"),f=document.createElement("mp4-box-type");t.type&&(f.textContent=t.type,n>1&&f.classList.add("collapsed"),c.appendChild(f)),i.forEach(function(e){"undefined"!=typeof t[e]&&c.setAttribute("data-"+e,t[e])}),l.length&&(l.forEach(function(e){b(e,t[e],_)}),c.appendChild(_)),t.boxes&&t.boxes.length?(t.boxes.forEach(function(t){return e(t,d,n+1)}),c.appendChild(d)):s.length&&(s.forEach(function(a){Array.isArray(t[a])?e({type:a,boxes:t[a],size:t[a].size},d,n+1):e(t[a],d,n+1)}),c.appendChild(d)),a.appendChild(c)},b=function(e,t,a){var n=document.createElement("mp4-name"),r=document.createElement("mp4-value"),i=document.createElement("mp4-property");if(n.setAttribute("data-name",e),n.textContent=e,t instanceof Uint8Array||t instanceof Uint32Array){for(var s=(0,o.default)(t,""),u=0,l=0;u<s.length;u++)if("\n"===s[u]&&21===++l){u++;break}var c=s.slice(0,u);c.length<s.length&&(c+="<"+(t.byteLength-336)+"b remaining of "+t.byteLength+"b total>"),r.setAttribute("data-value",c.toUpperCase()),r.innerHTML=c,r.classList.add("pre-like")}else if(Array.isArray(t)){var s="["+t.join(", ")+"]";r.setAttribute("data-value",s),r.textContent=s}else r.setAttribute("data-value",t),r.textContent=t;i.appendChild(n),i.appendChild(r),a.appendChild(i)};a.default={inspect:p,domify:m},t.exports=a.default},{"./common/data-to-hex.js":17,"./common/nal-parse":18}],20:[function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(a,"__esModule",{value:!0});var r=e("./mp4"),i=n(r),o=e("./ts"),s=n(o),u=e("./flv"),l=n(u);a.default={mp4Inspector:i.default,tsInspector:s.default,flvInspector:l.default},t.exports=a.default},{"./flv":19,"./mp4":21,"./ts":22}],21:[function(e,t,a){(function(n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(a,"__esModule",{value:!0});var i=e("../bit-streams/h264"),o=e("./common/nal-parse"),s=e("./common/data-to-hex.js"),u=r(s),l=function(e){var t="";return t+=String.fromCharCode(e[0]),t+=String.fromCharCode(e[1]),t+=String.fromCharCode(e[2]),t+=String.fromCharCode(e[3])},c=function(e){return new Date(1e3*e-20828448e5)},_=function(e){return{isLeading:(12&e[0])>>>2,dependsOn:3&e[0],isDependedOn:(192&e[1])>>>6,hasRedundancy:(48&e[1])>>>4,paddingValue:(14&e[1])>>>1,isNonSyncSample:1&e[1],degradationPriority:e[2]<<8|e[3]}},d=void 0,f=void 0,p=void 0,m={avc1:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength);return{dataReferenceIndex:t.getUint16(6),width:t.getUint16(24),height:t.getUint16(26),horizresolution:t.getUint16(28)+t.getUint16(30)/16,vertresolution:t.getUint16(32)+t.getUint16(34)/16,frameCount:t.getUint16(40),depth:t.getUint16(74),config:g(e.subarray(78,e.byteLength))}},avcC:function(e){var t,a,n,r,s=new DataView(e.buffer,e.byteOffset,e.byteLength),u={configurationVersion:e[0],avcProfileIndication:e[1],profileCompatibility:e[2],avcLevelIndication:e[3],lengthSizeMinusOne:3&e[4],sps:[],pps:[]},l=31&e[5];for(n=6,r=0;r<l;r++){a=s.getUint16(n),n+=2;var c=(0,i.discardEmulationPrevention)(new Uint8Array(e.subarray(n+1,n+a)));d=i.seqParameterSet.decode(c),p=(0,o.mergePS)(f,d),u.sps.push(d),n+=a}for(t=e[n],n++,r=0;r<t;r++){a=s.getUint16(n),n+=2;var c=(0,i.discardEmulationPrevention)(new Uint8Array(e.subarray(n+1,n+a)));f=i.picParameterSet.decode(c),p=(0,o.mergePS)(f,d),u.pps.push(f),n+=a}return u},btrt:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength);return{bufferSizeDB:t.getUint32(0),maxBitrate:t.getUint32(4),avgBitrate:t.getUint32(8)}},esds:function(e){return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),esId:e[6]<<8|e[7],streamPriority:31&e[8],decoderConfig:{objectProfileIndication:e[11],streamType:e[12]>>>2&63,bufferSize:e[13]<<16|e[14]<<8|e[15],maxBitrate:e[16]<<24|e[17]<<16|e[18]<<8|e[19],avgBitrate:e[20]<<24|e[21]<<16|e[22]<<8|e[23],decoderConfigDescriptor:{tag:e[24],length:e[25],audioObjectType:e[26]>>>3&31,samplingFrequencyIndex:(7&e[26])<<1|e[27]>>>7&1,channelConfiguration:e[27]>>>3&15}}}},ftyp:function(e){for(var t=new DataView(e.buffer,e.byteOffset,e.byteLength),a={majorBrand:l(e.subarray(0,4)),minorVersion:t.getUint32(4),compatibleBrands:[]},n=8;n<e.byteLength;)a.compatibleBrands.push(l(e.subarray(n,n+4))),n+=4;return a},dinf:function(e){return{boxes:g(e)}},dref:function(e){return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),dataReferences:g(e.subarray(8))}},hdlr:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength),a={version:t.getUint8(0),flags:new Uint8Array(e.subarray(1,4)),handlerType:l(e.subarray(8,12)),name:""},r=8;for(r=24;r<e.byteLength;r++){if(0===e[r]){r++;break}a.name+=String.fromCharCode(e[r])}return a.name=decodeURIComponent(n.escape(a.name)),a},mdat:function(e){return{byteLength:e.byteLength,nals:(0,o.nalParseAVCC)(e),size:e.byteLength}},mdhd:function(e){var t,a=new DataView(e.buffer,e.byteOffset,e.byteLength),n=4,r={version:a.getUint8(0),flags:new Uint8Array(e.subarray(1,4)),language:""};return 1===r.version?(n+=4,r.creationTime=c(a.getUint32(n)),n+=8,r.modificationTime=c(a.getUint32(n)),n+=4,r.timescale=a.getUint32(n),n+=8,r.duration=a.getUint32(n)):(r.creationTime=c(a.getUint32(n)),n+=4,r.modificationTime=c(a.getUint32(n)),n+=4,r.timescale=a.getUint32(n),n+=4,r.duration=a.getUint32(n)),n+=4,t=a.getUint16(n),r.language+=String.fromCharCode((t>>10)+96),r.language+=String.fromCharCode(((960&t)>>5)+96),r.language+=String.fromCharCode((31&t)+96),r},mdia:function(e){return{boxes:g(e)}},mfhd:function(e){return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),sequenceNumber:e[4]<<24|e[5]<<16|e[6]<<8|e[7]}},minf:function(e){return{boxes:g(e)}},mp4a:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength),a={dataReferenceIndex:t.getUint16(6),channelcount:t.getUint16(16),samplesize:t.getUint16(18),samplerate:t.getUint16(24)+t.getUint16(26)/65536};return e.byteLength>28&&(a.streamDescriptor=g(e.subarray(28))[0]),a},moof:function(e){return{boxes:g(e)}},moov:function(e){return{boxes:g(e)}},mvex:function(e){return{boxes:g(e)}},mvhd:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength),a=4,n={version:t.getUint8(0),flags:new Uint8Array(e.subarray(1,4))};return 1===n.version?(a+=4,n.creationTime=c(t.getUint32(a)),a+=8,n.modificationTime=c(t.getUint32(a)),a+=4,n.timescale=t.getUint32(a),a+=8,n.duration=t.getUint32(a)):(n.creationTime=c(t.getUint32(a)),a+=4,n.modificationTime=c(t.getUint32(a)),a+=4,n.timescale=t.getUint32(a),a+=4,n.duration=t.getUint32(a)),a+=4,n.rate=t.getUint16(a)+t.getUint16(a+2)/16,a+=4,n.volume=t.getUint8(a)+t.getUint8(a+1)/8,a+=2,a+=2,a+=8,n.matrix=new Uint32Array(e.subarray(a,a+36)),a+=36,a+=24,n.nextTrackId=t.getUint32(a),n},pdin:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength);return{version:t.getUint8(0),flags:new Uint8Array(e.subarray(1,4)),rate:t.getUint32(4),initialDelay:t.getUint32(8)}},sdtp:function(e){var t,a={version:e[0],flags:new Uint8Array(e.subarray(1,4)),samples:[]};for(t=4;t<e.byteLength;t++)a.samples.push({dependsOn:(48&e[t])>>4,isDependedOn:(12&e[t])>>2,hasRedundancy:3&e[t]});return a},sidx:function(e){var t,a=new DataView(e.buffer,e.byteOffset,e.byteLength),n={version:e[0],flags:new Uint8Array(e.subarray(1,4)),references:[],referenceId:a.getUint32(4),timescale:a.getUint32(8),earliestPresentationTime:a.getUint32(12),firstOffset:a.getUint32(16)},r=a.getUint16(22);for(t=24;r;t+=12,r--)n.references.push({referenceType:(128&e[t])>>>7,referencedSize:2147483647&a.getUint32(t),subsegmentDuration:a.getUint32(t+4),startsWithSap:!!(128&e[t+8]),sapType:(112&e[t+8])>>>4,sapDeltaTime:268435455&a.getUint32(t+8)});return n},smhd:function(e){return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),balance:e[4]+e[5]/256}},stbl:function(e){return{boxes:g(e)}},stco:function(e){var t,a=new DataView(e.buffer,e.byteOffset,e.byteLength),n={version:e[0],flags:new Uint8Array(e.subarray(1,4)),chunkOffsets:[]},r=a.getUint32(4);for(t=8;r;t+=4,r--)n.chunkOffsets.push(a.getUint32(t));return n},stsc:function(e){var t,a=new DataView(e.buffer,e.byteOffset,e.byteLength),n=a.getUint32(4),r={version:e[0],flags:new Uint8Array(e.subarray(1,4)),sampleToChunks:[]};for(t=8;n;t+=12,n--)r.sampleToChunks.push({firstChunk:a.getUint32(t),samplesPerChunk:a.getUint32(t+4),sampleDescriptionIndex:a.getUint32(t+8)});return r},stsd:function(e){return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),sampleDescriptions:g(e.subarray(8))}},stsz:function(e){var t,a=new DataView(e.buffer,e.byteOffset,e.byteLength),n={version:e[0],flags:new Uint8Array(e.subarray(1,4)),sampleSize:a.getUint32(4),entries:[]};for(t=12;t<e.byteLength;t+=4)n.entries.push(a.getUint32(t));return n},stts:function(e){var t,a=new DataView(e.buffer,e.byteOffset,e.byteLength),n={version:e[0],flags:new Uint8Array(e.subarray(1,4)),timeToSamples:[]},r=a.getUint32(4);for(t=8;r;t+=8,r--)n.timeToSamples.push({sampleCount:a.getUint32(t),sampleDelta:a.getUint32(t+4)});return n},styp:function(e){return m.ftyp(e)},tfdt:function(e){var t={version:e[0],flags:new Uint8Array(e.subarray(1,4)),baseMediaDecodeTime:e[4]<<24|e[5]<<16|e[6]<<8|e[7]};return 1===t.version&&(t.baseMediaDecodeTime*=Math.pow(2,32),t.baseMediaDecodeTime+=e[8]<<24|e[9]<<16|e[10]<<8|e[11]),t},tfhd:function(e){var t,a=new DataView(e.buffer,e.byteOffset,e.byteLength),n={version:e[0],flags:new Uint8Array(e.subarray(1,4)),trackId:a.getUint32(4)},r=1&n.flags[2],i=2&n.flags[2],o=8&n.flags[2],s=16&n.flags[2],u=32&n.flags[2];return t=8,r&&(t+=4,n.baseDataOffset=a.getUint32(12),t+=4),i&&(n.sampleDescriptionIndex=a.getUint32(t),t+=4),o&&(n.defaultSampleDuration=a.getUint32(t),t+=4),s&&(n.defaultSampleSize=a.getUint32(t),t+=4),u&&(n.defaultSampleFlags=a.getUint32(t)),n},tkhd:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength),a=4,n={version:t.getUint8(0),flags:new Uint8Array(e.subarray(1,4))};return 1===n.version?(a+=4,n.creationTime=c(t.getUint32(a)),a+=8,n.modificationTime=c(t.getUint32(a)),a+=4,n.trackId=t.getUint32(a),a+=4,a+=8,n.duration=t.getUint32(a)):(n.creationTime=c(t.getUint32(a)),a+=4,n.modificationTime=c(t.getUint32(a)),a+=4,n.trackId=t.getUint32(a),a+=4,a+=4,n.duration=t.getUint32(a)),a+=4,a+=8,n.layer=t.getUint16(a),a+=2,n.alternateGroup=t.getUint16(a),a+=2,n.volume=t.getUint8(a)+t.getUint8(a+1)/8,a+=2,a+=2,n.matrix=new Uint32Array(e.subarray(a,a+36)),a+=36,n.width=t.getUint16(a)+t.getUint16(a+2)/16,a+=4,n.height=t.getUint16(a)+t.getUint16(a+2)/16,n},traf:function(e){return{boxes:g(e)}},trak:function(e){return{boxes:g(e)}},trex:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength);return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),trackId:t.getUint32(4),defaultSampleDescriptionIndex:t.getUint32(8),defaultSampleDuration:t.getUint32(12),defaultSampleSize:t.getUint32(16),sampleDependsOn:3&e[20],sampleIsDependedOn:(192&e[21])>>6,sampleHasRedundancy:(48&e[21])>>4,samplePaddingValue:(14&e[21])>>1,sampleIsDifferenceSample:!!(1&e[21]),sampleDegradationPriority:t.getUint16(22)}},trun:function(e){var t,a={version:e[0],flags:new Uint8Array(e.subarray(1,4)),samples:[]},n=new DataView(e.buffer,e.byteOffset,e.byteLength),r=1&a.flags[2],i=4&a.flags[2],o=1&a.flags[1],s=2&a.flags[1],u=4&a.flags[1],l=8&a.flags[1],c=n.getUint32(4),d=8;for(r&&(a.dataOffset=n.getUint32(d),d+=4),i&&c&&(t={flags:_(e.subarray(d,d+4))},d+=4,o&&(t.duration=n.getUint32(d),d+=4),s&&(t.size=n.getUint32(d),d+=4),l&&(t.compositionTimeOffset=n.getUint32(d),d+=4),a.samples.push(t),c--);c--;)t={},o&&(t.duration=n.getUint32(d),d+=4),s&&(t.size=n.getUint32(d),d+=4),u&&(t.flags=_(e.subarray(d,d+4)),d+=4),l&&(t.compositionTimeOffset=n.getUint32(d),d+=4),a.samples.push(t);return a},"url ":function(e){return{version:e[0],flags:new Uint8Array(e.subarray(1,4))}},vmhd:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength);return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),graphicsmode:t.getUint16(4),opcolor:new Uint16Array([t.getUint16(6),t.getUint16(8),t.getUint16(10)])}}},g=function(e){for(var t,a,n,r,i,o=0,s=[],u=!1,c=null,_=new ArrayBuffer(e.length),d=new Uint8Array(_),f=0;f<e.length;++f)d[f]=e[f];for(t=new DataView(_);o<e.byteLength;)a=t.getUint32(o),n=l(e.subarray(o+4,o+8)),r=a>1?o+a:e.byteLength,"moov"===n&&(u=!0),"mdat"!==n||u?(i=(m[n]||function(e){return{data:e}})(e.subarray(o+8,r)),i.size=a,i.type=n,s.push(i)):c=e.subarray(o+8,r),c&&u&&(i=m.mdat(c),i.size=c.byteLength,i.type="mdat",s.push(i),c=null),o=r;return s},y=function e(t,a){var n;return a=a||0,n=new Array(2*a+1).join(" "),t.map(function(t,r){return n+t.type+"\n"+Object.keys(t).filter(function(e){return"type"!==e&&"boxes"!==e}).map(function(e){var a=n+"  "+e+": ",r=t[e];return r instanceof Uint8Array||r instanceof Uint32Array?a+(0,u.default)(r,n):a+JSON.stringify(r,null,2).split("\n").map(function(e,t){return 0===t?e:n+"  "+e}).join("\n")}).join("\n")+(t.boxes?"\n"+e(t.boxes,a+1):"")}).join("\n")},h=function(e){var t={type:"mp4",boxes:e,size:e.reduce(function(e,t){return e+t.size},0)},a=document.createElement("div");return b(t,a,1),a},b=function e(t,a,n){var r=function(e){return"[object Object]"===Object.prototype.toString.call(e)},i=["size","flags","type","version"],o=["boxes","nals","samples"],s=Object.keys(t).filter(function(e){return r(t[e])||Array.isArray(t[e])&&r(t[e][0])}),u=i.concat(o).concat(s),l=Object.keys(t).filter(function(e){return u.indexOf(e)===-1}),c=document.createElement("mp4-box"),_=document.createElement("mp4-properties"),d=document.createElement("mp4-boxes"),f=document.createElement("mp4-box-type");t.type&&(f.textContent=t.type,n>1&&f.classList.add("collapsed"),c.appendChild(f)),i.forEach(function(e){"undefined"!=typeof t[e]&&c.setAttribute("data-"+e,t[e])}),l.length&&(l.forEach(function(e){v(e,t[e],_)}),c.appendChild(_)),t.boxes&&t.boxes.length?(t.boxes.forEach(function(t){return e(t,d,n+1)}),c.appendChild(d)):s.length&&(s.forEach(function(a){Array.isArray(t[a])?e({type:a,boxes:t[a],size:t[a].size},d,n+1):e(t[a],d,n+1)}),c.appendChild(d)),a.appendChild(c)},v=function(e,t,a){var n=document.createElement("mp4-name"),r=document.createElement("mp4-value"),i=document.createElement("mp4-property");if(n.setAttribute("data-name",e),n.textContent=e,t instanceof Uint8Array||t instanceof Uint32Array){for(var o=(0,u.default)(t,""),s=0,l=0;s<o.length;s++)if("\n"===o[s]&&21===++l){s++;break}var c=o.slice(0,s);c.length<o.length&&(c+="<"+(t.byteLength-336)+"b remaining of "+t.byteLength+"b total>"),r.setAttribute("data-value",c.toUpperCase()),r.innerHTML=c,r.classList.add("pre-like")}else if(Array.isArray(t)){var o="["+t.join(", ")+"]";r.setAttribute("data-value",o),r.textContent=o}else r.setAttribute("data-value",t),r.textContent=t;i.appendChild(n),i.appendChild(r),a.appendChild(i)};a.default={inspect:g,textify:y,domify:h},t.exports=a.default}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../bit-streams/h264":3,"./common/data-to-hex.js":17,"./common/nal-parse":18}],22:[function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(a,"__esModule",{value:!0});var r=e("./common/nal-parse"),i=e("./common/data-to-hex.js"),o=n(i),s=188,u=71,l={h264:27,adts:15,metadata:21},c=function(e){for(var t=0,a=s,n=-1,r=[];a<e.byteLength;)e[t]!==u||e[a]!==u?(n=t,t++,a++):(n!==-1&&(r.push({type:"unknown-bytes",data:e.subarray(n,t)}),n=-1),r.push({type:"transportstream-packet",data:e.subarray(t,a)}),t+=s,a+=s);return t+s===e.byteLength&&(r.push({type:"transportstream-packet",data:e.subarray(t,a)}),t+=s,a+=s),t<e.byteLength&&r.push({type:"unknown-bytes",data:e.subarray(t)}),_(r)},_=function(e){var t=[],a=[],n=null,r=null,i=function(e){e.pid===r?(e.content.type="pmt",s(e)):null===n?t.push(e):o(e)},o=function(e){e.content.streamType=n[e.pid],e.content.type="pes"},s=function(e){var t=0,a=e.content,n=a.data;e.payloadUnitStartIndicator&&(t+=n[0]+1),a.data=n.subarray(t),"pat"===a.type?u(e):l(e)},u=function(e){var t=e.content,n=t.data;for(t.sectionNumber=n[7],t.lastSectionNumber=n[8],r=(31&n[10])<<8|n[11],t.pmtPid=r;a.length;)i(a.shift())},l=function(e){var a,r,i,s,u=e.content,l=u.data;if(1&l[5]){for(n={},a=(15&l[1])<<8|l[2],r=3+a-4,i=(15&l[10])<<8|l[11],s=12+i;s<r;)n[(31&l[s+1])<<8|l[s+2]]=l[s],s+=((15&l[s+3])<<8|l[s+4])+5;for(u.programMapTable=n;t.length;)o(t.shift())}},c=function(e){var t=4,n=e.data,o={};return e.payloadUnitStartIndicator=!!(64&n[1]),e.pid=31&n[1],e.pid<<=8,e.pid|=n[2],e.content=o,(48&n[3])>>>4>1&&(t+=n[t]+1),o.data=n.subarray(t),0===e.pid?(o.type="pat",s(e),e):null===r?(a.push(e),e):i(e)};return e.forEach(function(e){"transportstream-packet"===e.type?c(e):e.content={}}),e},d=function(e){var t=[],a={data:[],tsPacketIndices:[],size:0},n={data:[],tsPacketIndices:[],size:0},r={data:[],tsPacketIndices:[],size:0},i=function(e,t){var a;t.dataAlignmentIndicator=0!==(4&e[6]),a=e[7],192&a&&(t.pts=(14&e[9])<<27|(255&e[10])<<20|(254&e[11])<<12|(255&e[12])<<5|(254&e[13])>>>3,t.pts*=4,t.pts+=(6&e[13])>>>1,t.dts=t.pts,64&a&&(t.dts=(14&e[14])<<27|(255&e[15])<<20|(254&e[16])<<12|(255&e[17])<<5|(254&e[18])>>>3,t.dts*=4,t.dts+=(6&e[18])>>>1)),t.data=e.subarray(9+e[8])},o=function(e,a){var n,r=new Uint8Array(e.size),o={type:a},s=0;if(e.data.length){for(o.pid=e.pid,o.packetCount=e.data.length,o.tsPacketIndices=e.tsPacketIndices;e.data.length;)n=e.data.shift(),r.set(n.data,s),s+=n.data.byteLength;i(r,o),e.size=0,e.tsPacketIndices=[],t.push(o)}},s={pat:function e(a,n){var e=a.content;t.push({pid:a.pid,type:"pat",packetCount:1,sectionNumber:e.sectionNumber,lastSectionNumber:e.lastSectionNumber,tsPacketIndices:[n],pmtPid:e.pmtPid,data:e.data})},pes:function e(t,i){var s=void 0,u=void 0,e=t.content;switch(e.streamType){case l.h264:s=a,u="video";break;case l.adts:s=n,u="audio";break;case l.metadata:s=r,u="timed-metadata";break;default:return}t.payloadUnitStartIndicator&&o(s,u),s.pid=t.pid,s.tsPacketIndices.push(i),s.data.push(e),s.size+=e.data.byteLength},pmt:function e(a,n){var e=a.content,r=e.programMapTable,i={pid:a.pid,type:"pmt",tracks:[],tsPacketIndices:[n],packetCount:1,data:e.data},o=void 0,s=void 0;for(o in r)r.hasOwnProperty(o)&&(s={},s.id=+o,r[o]===l.h264?(s.codec="avc",s.type="video"):r[o]===l.adts&&(s.codec="adts",s.type="audio"),i.tracks.push(s));t.push(i)}},u=function(e,t){switch(e.content.type){case"pat":case"pmt":case"pes":s[e.content.type](e,t)}};return e.forEach(function(e,t){u(e,t)}),o(a,"video"),o(n,"audio"),o(r,"timed-metadata"),t},f=function(e){var t={},a=c(e),n=d(a);return t.tsMap=a,t.esMap=n,t},p=function(e){var t=(e.tsMap,e.esMap),a=document.createElement("div");return m(t,a,1),a},m=function(e,t,a){e.forEach(function(e){document.createElement("div");y(g(e),t,a+1)})},g=function(e){return"video"===e.type&&(e.nals=(0,r.nalParseAnnexB)(e.data),e.nals.size=e.data.length),e},y=function e(t,a,n){var r=function(e){return"[object Object]"===Object.prototype.toString.call(e)},i=["size","flags","type","version"],o=["boxes","nals","samples","packetCount"],s=Object.keys(t).filter(function(e){return r(t[e])||Array.isArray(t[e])&&r(t[e][0])}),u=i.concat(o).concat(s),l=Object.keys(t).filter(function(e){return u.indexOf(e)===-1}),c=document.createElement("mp4-box"),_=document.createElement("mp4-properties"),d=document.createElement("mp4-boxes"),f=document.createElement("mp4-box-type");t.type&&(f.textContent=t.type,n>1&&f.classList.add("collapsed"),c.appendChild(f)),i.forEach(function(e){"undefined"!=typeof t[e]&&c.setAttribute("data-"+e,t[e])}),l.length&&(l.forEach(function(e){h(e,t[e],_)}),c.appendChild(_)),t.boxes&&t.boxes.length?(t.boxes.forEach(function(t){return e(t,d,n+1)}),c.appendChild(d)):s.length&&(s.forEach(function(a){
Array.isArray(t[a])?e({type:a,boxes:t[a],size:t[a].size},d,n+1):e(t[a],d,n+1)}),c.appendChild(d)),a.appendChild(c)},h=function(e,t,a){var n=document.createElement("mp4-name"),r=document.createElement("mp4-value"),i=document.createElement("mp4-property");if(n.setAttribute("data-name",e),n.textContent=e,t instanceof Uint8Array||t instanceof Uint32Array){for(var s=(0,o.default)(t,""),u=0,l=0;u<s.length;u++)if("\n"===s[u]&&21===++l){u++;break}var c=s.slice(0,u);c.length<s.length&&(c+="<"+(t.byteLength-336)+"b remaining of "+t.byteLength+"b total>"),r.setAttribute("data-value",c.toUpperCase()),r.innerHTML=c,r.classList.add("pre-like")}else if(Array.isArray(t)){var s="["+t.join(", ")+"]";r.setAttribute("data-value",s),r.textContent=s}else r.setAttribute("data-value",t),r.textContent=t;i.appendChild(n),i.appendChild(r),a.appendChild(i)};a.default={inspect:f,domify:p},t.exports=a.default},{"./common/data-to-hex.js":17,"./common/nal-parse":18}],23:[function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(a,"__esModule",{value:!0});var r=e("./bit-streams/h264"),i=n(r),o=e("./inspectors"),s={h264Codecs:i.default,mp4Inspector:o.mp4Inspector,tsInspector:o.tsInspector,flvInspector:o.flvInspector};s.VERSION="1.1.0",a.default=s,t.exports=a.default},{"./bit-streams/h264":3,"./inspectors":20}]},{},[23])(23)});